"use strict";window._theme=window._theme||{},_theme.isMobile=jQuery(window).width()<768,_theme.isIpad=jQuery(window).width()<1025,_theme.isIpadAndUp=jQuery(window).width()>767,_theme.isLaptopAndUp=jQuery(window).width()>1199.99,_theme.getOS=function(){if(!window.navigator)return"";var userAgent=window.navigator.userAgent,userAgentData=window.navigator.userAgentData,platform=userAgentData&&userAgentData.platform?userAgentData.platform:window.navigator.platform,macosPlatforms=["Macintosh","MacIntel","MacPPC","Mac68K"],windowsPlatforms=["Win32","Win64","Windows","WinCE"],iosPlatforms=["iPhone","iPad","iPod"],os=null;return macosPlatforms.indexOf(platform)!==-1?os="mac-os":iosPlatforms.indexOf(platform)!==-1?os="ios":windowsPlatforms.indexOf(platform)!==-1?os="windows":/Android/.test(userAgent)?os="android":/Linux/.test(platform)&&(os="linux"),os},_theme.initSliderPlayPause=function($parent,$sliderInstance,label){if($parent.length===0||$parent.find(".homepage-slider-play-pause").length===0)return;label||(label="Slider Autoplay play/pause"),$parent.find(".homepage-slider-play-pause").removeClass("hidden");const $playPausebutton=$parent.find(".homepage-slider-play-pause button");$playPausebutton.attr("aria-label",label+" pause"),$playPausebutton.on("click",function(evt){jQuery(this).toggleClass("active");let msg="Autoplay started. press to pause",evtName="slickPlay";jQuery(this).attr("aria-label",label+" pause"),jQuery(this).hasClass("active")&&(msg="Autoplay paused. press to play",evtName="slickPause",jQuery(this).attr("aria-label",label+" play")),$sliderInstance.slick(evtName)})},_theme.iPhoneVersion=function(){var iHeight=window.screen.height,iWidth=window.screen.width;return iWidth===414&&iHeight===896?"xmax-xr":iWidth===375&&iHeight===812?"x-xs":iWidth===320&&iHeight===480?"4":iWidth===375&&iHeight===667?"6":iWidth===414&&iHeight===736?"6-plus":iWidth===320&&iHeight===568?"5":iHeight<=480?"2-3":"none"},_theme.focusFirstTabbable=function($container,tabbableAdditionalElems){if(!(!$container||$container.length===0))try{const tabbableElems=["select","input","textarea","button","a"];tabbableAdditionalElems&&(Array.isArray(tabbableAdditionalElems)&&(tabbableElems=tabbableElems.concat(tabbableAdditionalElems)),typeof tabbableAdditionalElems=="string"&&tabbableElems.push(tabbableAdditionalElems)),$container.find(tabbableElems.join(",")).filter(":visible").first().focus()}catch{}},_theme.focusTrap=function(elem,cb,tabbableAdditionalElems,enableBackwardJourney,disableLinearNavigation){let tabbableElems=["select","input","textarea","button","a"];tabbableAdditionalElems&&(Array.isArray(tabbableAdditionalElems)&&(tabbableElems=tabbableElems.concat(tabbableAdditionalElems)),typeof tabbableAdditionalElems=="string"&&tabbableElems.push(tabbableAdditionalElems));let tabbable=elem.find(tabbableElems.join(",")).filter(":visible"),firstTabbable=tabbable.first(),lastTabbable=tabbable.last();firstTabbable.focus(),lastTabbable.off("keydown").on("keydown",function(e){if(disableLinearNavigation&&e.key&&(e.key==="ArrowDown"||e.key==="ArrowUp")){e.preventDefault();return}e.which===9&&!e.shiftKey&&(e.preventDefault(),firstTabbable.focus())}),firstTabbable.off("keydown").on("keydown",function(e){if(disableLinearNavigation&&e.key&&(e.key==="ArrowDown"||e.key==="ArrowUp")){e.preventDefault();return}e.which===9&&e.shiftKey&&!enableBackwardJourney&&(e.preventDefault(),lastTabbable.focus())}),elem.off("keydown").on("keydown",function(e){if(disableLinearNavigation&&e.key&&(e.key==="ArrowDown"||e.key==="ArrowUp")){e.preventDefault();return}e.keyCode===27&&cb(elem,e)})},_theme.attributeSetter=function(el,attrs){for(let key in attrs)el.setAttribute(key,attrs[key])},_theme.attributeRemover=function(el,attrs){for(let key of attrs)el.removeAttribute(key)},_theme.handleKeyboardUpDownButtonPress=function(evt){const key=evt.key.toUpperCase();if(key==="ARROWUP"){const $prevElem=$(this).prev();$prevElem.length&&($prevElem.addClass("selected").siblings().removeClass("selected"),setTimeout(function(){$prevElem.focus()},250))}if(key==="ARROWDOWN"){const $nextElem=$(this).next();$nextElem.length&&($nextElem.addClass("selected").siblings().removeClass("selected"),setTimeout(function(){$nextElem.focus()},250))}key==="TAB"&&!evt.shiftKey&&$(this).next().length===0&&evt.preventDefault(),(key==="ENTER"||key===" "&&evt.which===32)&&evt.target.click()},_theme.handleKeyboardEnterOrSpacePress=function(evt,activeUpDown,callback){const key=evt.code?evt.code.toUpperCase():evt.key.toUpperCase(),target=evt.target;if((key==="ENTER"||key===" "&&evt.which===32)&&(target.click(),callback&&typeof callback=="function"&&callback()),!activeUpDown)return!0;key==="ARROWUP"&&target.previousElementSibling&&(target.previousElementSibling.focus(),target.nextElementSibling&&target.nextElementSibling.classList.remove("select"),target.previousElementSibling.classList.add("select")),key==="ARROWDOWN"&&target.nextElementSibling&&(target.nextElementSibling.focus(),target.previousElementSibling&&target.previousElementSibling.classList.remove("select"),target.nextElementSibling.classList.add("select"))},_theme.toggleCustomerForm=function(show,callback){if(show)_theme.isMobile&&($("#log-in-form").closest(".halo_modal-custom.cm-log-in-form").removeAttr("aria-hidden"),$("#log-in-form").closest(".halo_modal-custom.cm-log-in-form").siblings().attr("aria-hidden","true")),$("#log-in-form").fadeIn(),$("body").addClass("modal-open"),$(".cm-log-in-form").css("display","block").addClass("show"),$(".wrapper-overlay").removeClass("active"),$("#log-in-form").attr("data-source","#header-pc-login-modal-cta"),setTimeout(function(){_theme.focusTrap($("#log-in-form"),function(){callback&&typeof callback=="function"?callback():$("#log-in-form .close-modal").click()})},250);else{_theme.isMobile&&$("#log-in-form").closest(".halo_modal-custom.cm-log-in-form").siblings().removeAttr("aria-hidden"),$("body").removeClass("modal-open"),$(".cm-log-in-form").css("display","none"),$(".cm-log-in-form").removeClass("show"),$(".wrapper-overlay").removeClass("active"),$("#log-in-form").attr("tabindex",-1);const dataSource=$("#log-in-form").data("source");dataSource?$(dataSource).focus():$("[data-toggle='modal'][data-target='#log-in-form']").first().focus(),window.location.hash=""}},_theme.Helpers=function(){function setParamInURL(param,value,_url){_url||(_url=window.location.href);var url=new URL(_url),search_params=url.searchParams;search_params.set(param,value),search_params.set("page",1),url.search=search_params.toString();var new_url=url.toString();return new_url}function getParamFromURL(param,_url){_url||(_url=window.location.href);var url=new URL(_url),search_params=url.searchParams,paramVal=search_params.get(param);return paramVal}function deleteParamFromURL(param,_url){if(!param)return null;_url||(_url=window.location.href);var url=new URL(_url),search_params=url.searchParams;search_params.delete(param);var new_url=url.toString();return new_url}function setCookie(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3),expires="; expires="+date.toUTCString()}document.cookie=name+"="+(value||"")+expires+"; path=/"}function getCookie(cname){let name=cname+"=",ca=decodeURIComponent(document.cookie).split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;c.charAt(0)==" ";)c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length)}return""}function eraseCookie(name){document.cookie=name+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function goToPreviousPage(){window.history.back()}function setItemIntoLS(key,value){if(!(typeof localStorage===void 0||typeof localStorage===null))return typeof value!="string"&&(value=JSON.stringify(value)),localStorage.setItem(key,value),!0}function getItemFromLS(key){if(typeof localStorage===void 0||typeof localStorage===null)return;let value=localStorage.getItem(key);return JSON.parse(value)}function removeItemFromLS(key){if(!(typeof localStorage===void 0||typeof localStorage===null))return localStorage.removeItem(key),!0}function setItemIntoSS(key,value){if(!(typeof sessionStorage===void 0||typeof sessionStorage===null))return typeof value!="string"&&(value=JSON.stringify(value)),sessionStorage.setItem(key,value),!0}function getItemFromSS(key){if(typeof sessionStorage===void 0||typeof sessionStorage===null)return;let value=sessionStorage.getItem(key);return JSON.parse(value)}function removeItemFromSS(key){if(!(typeof sessionStorage===void 0||typeof sessionStorage===null))return sessionStorage.removeItem(key),!0}function showNotification(msg,delay){const toastModel=document.querySelector("[data-toast-notify]");!msg||!toastModel||(toastModel.querySelector("[data-toastmsg]").innerHTML=msg,toastModel.classList.add("active"),setTimeout(function(){toastModel.classList.remove("active")},delay||3e3))}function changeLineItemQty(line,qty,viaId,successCB,errorCB){let data="quantity="+qty+"&line="+line,miniCartError=document.querySelectorAll(".mini-cart-error-msg")[line-1];viaId&&(data={quantity:qty,id:line}),jQuery.ajax({type:"post",url:"/cart/change.js",data,dataType:"json",success:function(data2){successCB&&typeof successCB=="function"&&successCB(data2)},error:function(err){miniCartError.innerHTML=err.responseJSON.message,_theme.toggleAjaxModal(1,jQuery.parseJSON(err.responseText).description),errorCB&&typeof errorCB=="function"&&errorCB(err)}})}function addProductToCart(vid,qty,props,successCB,errorCB){vid&&jQuery.ajax({url:window.routes.cart_add_url+".js",method:"POST",beforeSend:function(){_theme.toggleLoading(1)},data:{quantity:qty,id:vid,properties:props?{proType:props}:null},dataType:"json",success:function(res){successCB&&typeof successCB=="function"&&successCB(res)},error:function(err){_theme.toggleAjaxModal(1,jQuery.parseJSON(err.responseText).description),errorCB&&typeof errorCB=="function"&&errorCB(err)},complete:function(){_theme.toggleLoading()}})}function removeItemsFromCart(items){if(!items||items.length===0)return;const updates={};items.forEach(function(vid){updates[vid]=0}),fetch("/cart/update.js",{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({updates})}).then(function(res){return res.json()}).then(function(res){window.location.reload()}).catch(function(err){console.log(err),_theme.toggleAjaxModal(1,jQuery.parseJSON(err.responseText).description)})}function handleize(str){return str.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-$/,"").replace(/^-/,"")}function toggleLoader(show){const loader=document.querySelector(".loading-modal");loader&&(show?loader.classList.add("show"):loader.classList.remove("show"))}function fetchOfferData(){return fetch("/cart?view=free-offers").then(function(res){return res.json()}).then(function(dd){return dd}).catch(function(err){console.log(err)})}function isNumberKey(evt){var charCode=evt.which?evt.which:evt.keyCode;return!(charCode!=46&&charCode>31&&(charCode<48||charCode>57))}function refreshKlarna(){window.KlarnaOnsiteService=window.KlarnaOnsiteService||[],window.KlarnaOnsiteService.push({eventName:"refresh-placements"})}function updateHtml(html,str,data){var newhtml=html;return newhtml.indexOf(str)>-1?(newhtml=newhtml.replace(str,data),this.updateHtml(newhtml,str,data)):newhtml}function validateEmail(email){email||(email="");const regex=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return email.match(regex)}function getFormattedDate(date){if(!date)return"";const d=new Date(date);let dateVal=d.getDate();dateVal=dateVal>=10?dateVal:"0"+dateVal;let month=d.getMonth()+1;return month=month>=10?month:"0"+month,month+"/"+dateVal+"/"+d.getFullYear()}function getFormattedTime(date){if(!date)return"";const d=new Date(date);let hours=d.getHours(),minutes=d.getMinutes();const timeLabel=hours<12?"AM":"PM";return hours=hours<=12?hours:hours-12,hours=hours>=10?hours:"0"+hours,minutes=minutes>=10?minutes:"0"+minutes,hours+":"+minutes+" "+timeLabel}const throttle=(fn,ms=300)=>{let lastCall=Date.now()-2*ms,result,trailing;function invoke(...args){return lastCall=Date.now(),result=fn.apply(this,args)}return function(...args){const now=Date.now();return now-lastCall>=ms?invoke.apply(this,args):(clearTimeout(trailing),trailing=setTimeout(()=>invoke.apply(this,args),lastCall-now+ms),result)}};function isInViewport(element){if(!element)return!1;const rect=element.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}function stringToHTML(str){if(!str)return null;var parser=new DOMParser,doc=parser.parseFromString(str,"text/html");return doc.body}return{setParamInURL,getParamFromURL,deleteParamFromURL,setCookie,getCookie,eraseCookie,setItemIntoLS,getItemFromLS,removeItemFromLS,setItemIntoSS,getItemFromSS,removeItemFromSS,showNotification,changeLineItemQty,addProductToCart,removeItemsFromCart,handleize,toggleLoader,fetchOfferData,isNumberKey,refreshKlarna,updateHtml,validateEmail,getFormattedDate,getFormattedTime,throttle,isInViewport,stringToHTML,goToPreviousPage}}();
//# sourceMappingURL=/cdn/shop/t/292/assets/util.js.map?v=81161454975691893561710333921
