customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.checkoutBtn=this.querySelector('[name="custom_checkout"]'),this.form.querySelector("[name=id]").disabled=!1,this.onSubmitHandler=this.onSubmitHandler.bind(this),this.onSubmitBISForm=this.onSubmitBISForm.bind(this),this.handleCheckoutBtn=this.handleCheckoutBtn.bind(this),this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.isQuickview=this.closest("[data-quickview-modal]"),this.submitButton=this.querySelector('[type="submit"]'),document.querySelector("cart-drawer")&&this.submitButton.setAttribute("aria-haspopup","dialog"),this.initSlider(),_theme.isMobile&&(this.mobSlider(),this.mobileTabsHandle()),this.initZoom(),this.initGeneralEvents(),this.hadleAccordionsFaq()}connectedCallback(){}disconnectedCallback(){this.form.removeEventListener("submit",this.onSubmitHandler),this.checkoutBtn.removeEventListener("click",this.handleCheckoutBtn),$(".notify_me_btn.submit_btn").length&&($(document).off("click",".notify_me_btn.submit_btn"),$(".notify_me_btn.submit_btn").off());const t=this.closest(".quickview-tpl");t&&($(t).find(".product-main-slider.product__media-list").hasClass("slick-initialized")&&$(t).find(".product-main-slider.product__media-list").slick("unslick"),$(t).find(".product-thumb-slider").hasClass("slick-initialized")&&$(t).find(".product-thumb-slider").slick("unslick"),$(t).find("[data-zoom]").trigger("zoom.destroy"))}mobSlider(){$(".mobile-pdp-slider-wrap").slick({dots:!1,arrows:!0})}initSlider(){setTimeout((function(){!function(){const t=$(".product-main-slider.product__media-list"),e=$(".product-thumb-slider");t.hasClass("slick-initialized")||t.slick({rows:0,infinite:!0,slidesToShow:1,slidesToScroll:1,infinite:!0,arrows:!0,dots:!1,accessibility:!1,fade:!0,asNavFor:".product-thumb-slider"});if(!e.hasClass("slick-initialized")){let t=$(".product-photos .product-main-slider").attr("data-imagesize");if(t){let e=document.querySelector(".product-photos .product-thumb-slider");t=parseInt(t),t<5&&e&&e.classList.add("product-thumb-slider-md")}e.on("afterChange",(function(t,e,i,r){e.$slider.find('.slick-slide[aria-hidden="false"]').attr("tabindex",0),setTimeout((function(){e.$slider.find('.slick-slide[aria-hidden="false"]').attr("tabindex",0)}),50),setTimeout((function(){e.$slider.find('.slick-slide[aria-hidden="false"]').attr("tabindex",0)}),100)})),e.slick({rows:0,infinite:!0,slidesToShow:5,slidesToScroll:1,infinite:!0,accessibility:!0,asNavFor:".product-main-slider.product__media-list",dots:!1,arrows:!1,responsive:[{breakpoint:1199,settings:{slidesToShow:3,slidesToScroll:1}}]}),$(".product-thumb-slider .thumbnail-list__item").off("click").on("click",(function(t){t.preventDefault();const e=$(this).attr("data-slick-index");try{$(".product-main-slider.product__media-list").slick("slickGoTo",e)}catch(t){}}))}}()}),500)}initZoom(){$("[data-zoom]").length&&window.innerWidth>1199&&($("[data-zoom]").trigger("zoom.destroy"),$("[data-zoom]").zoom(),window.onresize=debounce((function(t){$("[data-zoom]").trigger("zoom.destroy"),window.innerWidth>1199&&$("[data-zoom]").zoom()}),500))}initGeneralEvents(){this.form.addEventListener("submit",this.onSubmitHandler),this.checkoutBtn.addEventListener("click",this.handleCheckoutBtn),$(".notify_me_btn.submit_btn").length&&$(document).on("click",".notify_me_btn.submit_btn",(()=>{this.onSubmitBISForm()}))}hadleAccordionsFaq(){document.querySelectorAll(".product-faq .prod-accordion").forEach((t=>{const e=t.querySelector("button.question"),i=t.nextElementSibling,r=t.querySelector(".question .icon-dropdown"),o=()=>{r.classList.contains("active")?(r.classList.remove("active"),i.style.maxHeight="0px",e.setAttribute("aria-expanded","false"),e.parentElement.nextElementSibling.classList.remove("show")):(r.classList.add("active"),i.style.maxHeight=i.scrollHeight+"px",e.setAttribute("aria-expanded","true"),e.parentElement.nextElementSibling.classList.add("show"))};e.addEventListener("click",(t=>{t.stopPropagation(),o()})),e.addEventListener("keydown",(t=>{"Enter"===t.key&&(t.preventDefault(),t.stopPropagation(),o())}))}))}mobileTabsHandle(){const t=document.querySelector(".prod-tabcordion--tabs");document.querySelector(".product-faq").childElementCount<=0&&document.querySelector("#tab3-tab").classList.add("hideprodTab"),t.removeAttribute("role"),_theme.attributeRemover(t.querySelector(".data-tab"),["role","aria-controls"]),_theme.attributeRemover(document.querySelector(".open-always.prod-tabcordion--entry"),["role","aria-labelledby"]);const e=document.querySelectorAll(".mobile-accordion-controller"),i=function(t){this.parentElement.classList.toggle("is-active"),"false"==this.getAttribute("aria-expanded")?(this.setAttribute("aria-expanded","true"),Array.from(this.parentElement.querySelectorAll(".question")).forEach((t=>{t.removeAttribute("tabindex")}))):(this.setAttribute("aria-expanded","false"),Array.from(this.parentElement.querySelectorAll(".question")).forEach((t=>{t.setAttribute("tabindex","-1")})))};Array.from(e).forEach((t=>{const e=t.parentElement;_theme.attributeRemover(e,["role","tabindex","data-title","aria-labelledby"]),_theme.attributeSetter(t,{"aria-expanded":"false",role:"button",tabindex:"0"}),t.addEventListener("click",i),e.querySelector(".prod-tabcordion--entry-container").setAttribute("tab-index","-1"),Array.from(e.querySelectorAll(".question")).forEach((t=>{t.setAttribute("tabindex","-1")}))}))}handleCheckoutBtn(t){t.preventDefault(),this.checkoutBtn.setAttribute("aria-disabled",!0),_theme.toggleLoading(1),this.checkoutBtn.classList.add("loading"),this.onSubmitHandler(t,(function(){_theme.toggleLoading(),window.location.href="/checkout"}))}onSubmitBISForm(){let t=!1,e="";const i=document.querySelector(".product_alert_signup_modal .error");i.style.display="none";var r=document.getElementById("txtProductSKU").value,o=document.getElementById("txtEmailAddress"),s=o.value;s=s?s.trim():s;var a=document.getElementById("hdnAlertCode").value;document.querySelector(".product_alert_signup_modal input#alert_check");if(""===s)t=!0,e="Email edit field is required";else{/^\S+@\S+\.\S+$/.test(s)||(t=!0,e="Please enter a valid email address")}if(t){i.innerHTML="";const t=document.createElement("span");t.setAttribute("role","alert"),t.textContent=e,i.appendChild(t),i.style.display="block",o.focus()}else _ltk.Alerts.AddAlert(s,r,a),_ltk.Alerts.Submit(),alert("Thank you! We will notify you when this product becomes available."),document.querySelector(".product_alert_signup_wrapper").classList.add("hide")}onSubmitHandler(t,e){t.preventDefault();const i=this;if("true"===this.submitButton.getAttribute("aria-disabled"))return;this.isQuickview=this.closest("[data-quickview-modal]"),this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),_theme.toggleLoading(1),this.submitButton.classList.add("loading");const r=fetchConfig("javascript");r.headers["X-Requested-With"]="XMLHttpRequest",delete r.headers["Content-Type"];const o=new FormData(this.form);this.cart&&(o.append("sections",this.cart.getSectionsToRender().map((t=>t.id))),o.append("sections_url",window.location.pathname),this.cart.setActiveElement(document.activeElement)),r.body=o,this.updateATCAccessibilityStatus("in-progress"),fetch(`${routes.cart_add_url}`,r).then((t=>t.json())).then((t=>{if(t.status){this.handleErrorMessage(t.description);const e=this.submitButton.querySelector(".sold-out-message");return e?(this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.querySelector("span").classList.add("hidden"),e.classList.remove("hidden"),this.error=!0,_theme.toggleLoading(),void this.updateATCAccessibilityStatus("error",t.description)):void _theme.toggleLoading()}e&&"function"==typeof e?e():(this.updateATCAccessibilityStatus("done"),Shopify.getCart((t=>{_theme.MiniCart.lineItemChangeCallBack(t,(()=>{this.isQuickview&&$("[data-quickview-modal]").fadeOut(),_theme.toggleLoading(),_theme.toggleSideCart(1,(function(){const t=document.querySelector("[data-quickview-modal]");if(t&&i.isQuickview){const e=t.getAttribute("data-source");if(e){const t=document.querySelector('.product-item[data-product-id="'+e+'"] .quickview-button');t&&t.focus()}}else{const t=document.querySelector(".product-form__buttons .product-form__submit");t&&t.focus()}}))}))}))),this.error=!1})).catch((t=>{_theme.toggleLoading(),console.error(t)})).finally((()=>{this.submitButton.classList.remove("loading"),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||this.submitButton.removeAttribute("aria-disabled"),this.querySelector(".loading-overlay__spinner").classList.add("hidden"),_theme.toggleLoading()}))}handleErrorMessage(t=!1){this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessageWrapper&&(this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!t),t&&(this.errorMessage.textContent=t))}updateATCAccessibilityStatus(t,e){const i=this.querySelector("[data-aria-live]");if(i&&t)switch(t){case"in-progress":i.textContent="Adding";break;case"done":i.textContent="Item added to your cart";break;case"error":i.textContent=e||"Something went wrong";break;default:i.textContent=""}}});